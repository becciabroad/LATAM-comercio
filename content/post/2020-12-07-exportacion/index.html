---
title: Exportación
author: Rebecca Hoffmann
date: '2020-12-07'
slug: exportacion
categories: []
tags: []
draft: false
output:
  blogdown::html_page
---

<link href="index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="index_files/anchor-sections/anchor-sections.js"></script>


<p>El objetivo de este post es analizar qué países en América Latina exportan qué tipo de productos utilizando un grafico de sets paralelos del parquete ggforce que permite visualizar en una manera muy lógica los datos.</p>
<p>Cómo en los otros posts, utilizaría el API de Open Trade Statistics. En primer lugar, aprendo las librarías necesarias para realizar el analisis:</p>
<pre class="r"><code>library(tradestatistics) #parquete de los datos
library(tidyverse)
library(ggplot2)
library(ggforce) #para graficos de sets paralelos</code></pre>
<p>En segundo lugar, eligo los datos que necesito para realizar el set de parelelo. Solamente se analiza para el año 2018:</p>
<pre class="r"><code>export_producto_2017 &lt;- readr::read_csv(&quot;https://raw.githubusercontent.com/cienciadedatos/datos-de-miercoles/master/datos/2019/2019-05-01/comercio_hispanoamerica_mundo_agregado.csv&quot;) %&gt;%
  filter(anio == &quot;2017&quot;) %&gt;%
  select(nombre_comunidad_producto,
         pais_origen_pertenece_a_hispanoamerica, 
         pais_destino_pertenece_a_hispanoamerica) %&gt;%
  rename(&#39;Producto&#39; = &#39;nombre_comunidad_producto&#39;) %&gt;%
  mutate(
    Origen = ifelse(pais_origen_pertenece_a_hispanoamerica == 1, &quot;América Latina&quot;, &quot;Resto del mundo&quot;),
    Destino = ifelse(pais_destino_pertenece_a_hispanoamerica == 1, &quot;América Latina&quot;, &quot;Resto del mundo&quot;)) %&gt;%
  group_by(Producto,
           Origen, 
           Destino) %&gt;%
  mutate(value = n()) %&gt;%
  ungroup() %&gt;%
  select(Producto, Origen, Destino, value)
 
  
export_producto_graficar &lt;- export_producto_2017 %&gt;%
  gather_set_data(2:3) %&gt;%
  ggplot(aes(x, id = id, split = y, value = value)) +
  geom_parallel_sets(aes(fill = Producto), alpha = 0.5, axis.width = 0.1) +
  geom_parallel_sets_axes(axis.width = 0.1) +
  geom_parallel_sets_labels(color = &quot;white&quot;, angle = 90, size = 2) +
  theme_minimal() +
  theme(legend.position = &quot;bottom&quot;)
  theme(axis.text.y = element_blank()) +
  labs(title = &quot;Productos exportado según origen y destino (2017)&quot;,
       caption = &quot;Fuente: Open Trade Statistics&quot;)
## List of 3
##  $ axis.text.y: list()
##   ..- attr(*, &quot;class&quot;)= chr [1:2] &quot;element_blank&quot; &quot;element&quot;
##  $ title      : chr &quot;Productos exportado según origen y destino (2017)&quot;
##  $ caption    : chr &quot;Fuente: Open Trade Statistics&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;theme&quot; &quot;gg&quot;
##  - attr(*, &quot;complete&quot;)= logi FALSE
##  - attr(*, &quot;validate&quot;)= logi TRUE

export_producto_graficar</code></pre>
<p><img src="index_files/figure-html/exportacion-1.png" width="672" /></p>
<div id="including-plots" class="section level1">
<h1>Including Plots</h1>
</div>
