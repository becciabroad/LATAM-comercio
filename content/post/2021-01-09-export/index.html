---
title: Exportación
author: Rebecca Hoffmann
date: '2021-01-09'
slug: export
categories: []
tags: []
draft: false
output:
  blogdown::html_page
---

<link href="index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="index_files/anchor-sections/anchor-sections.js"></script>


<p>En este post, el objetivo es analizar la composición de las exportaciones en América Latina. Cómo hemos visto en los últimos posts, el comercio exterior han aumentado en América Latina desde los años 1990s. Pero aún parece que hay una sesgo en qué tipo de productos se importa y exporta en la región. Por lo tanto, en este post se enfoca en las exportaciones de la región.</p>
<p>En el post sobre el desarrollo histórico del comercio exterior en América Latina, ya vimos unas tendencias, pero en este post desarrolla el tema sobre las exportaciones.</p>
<p>El post está divido en dos partes:</p>
<ol style="list-style-type: decimal">
<li>Un analisis sobre los niveles de exportación de los países de América Latina en 2018 utilizando un mapa estilo cartograma. Si aún no tienes el paquete de cartograma se puede descargar con el siguiente comando:</li>
</ol>
<p>install.packages(“cartogram”)</p>
<ol start="2" style="list-style-type: decimal">
<li>Un analisis sobre las categorías de productos que los países más exportaron durante el 2018.</li>
</ol>
<div id="las-libraría-utilizadas" class="section level3">
<h3>Las libraría utilizadas:</h3>
<pre class="r"><code>library(tidyverse)
library(tradestatistics)
library(ggplot2)
library(ggthemes)
library(scales)
library(maptools)
library(cartogram)</code></pre>
</div>
<div id="mapa-de-cartograma-de-las-exportaciones-en-américa-latina" class="section level2">
<h2>Mapa de Cartograma de las exportaciones en América Latina</h2>
<div id="descargando-los-datos" class="section level3">
<h3>Descargando los datos</h3>
<p>Cómo en el post sobre importación necesito descargar dos diferentes data frames desde el base de datos de Open Trade Statistics y después unirlos en uno para separar la región de las Americas:</p>
<pre class="r"><code>comercio_mundo_api &lt;- tradestatistics::ots_create_tidy_data(
  years = 2018, 
  reporters = &quot;all&quot;, 
  partners = &quot;all&quot;, 
  products = &quot;all&quot;) %&gt;%
  rename(country_iso = &#39;reporter_iso&#39;)

countries_LATAM &lt;- tradestatistics::ots_countries %&gt;%
  filter(continent == &quot;Americas&quot;) 

export_latam &lt;- merge(x = comercio_mundo_api, y = countries_LATAM,
      by = &quot;country_iso&quot;) %&gt;%
  select(country_iso,
         reporter_fullname_english,
         export_value_usd,
         top_export_product_code) %&gt;%
  filter(
         reporter_fullname_english != &quot;USA, Puerto Rico and US Virgin Islands (excludes Virgin Islands until 1981)&quot;,
         reporter_fullname_english != &quot;Canada&quot;,
         reporter_fullname_english != &quot;Greenland&quot;,
         reporter_fullname_english != &quot;Br. Virgin Isds&quot;,
         reporter_fullname_english != &quot;United States Minor Outlying Islands&quot;,
         reporter_fullname_english != &quot;South Georgia and the South Sandwich Islands&quot;) %&gt;% # Saco los países no correspondiendo a América Latina
  drop_na()</code></pre>
</div>
<div id="generando-el-mapa" class="section level3">
<h3>Generando el mapa</h3>
<pre class="r"><code>data(wrld_simpl)

latam&lt;-subset(wrld_simpl,wrld_simpl$SUBREGION==5|wrld_simpl$SUBREGION==13) # Eligo el subset de América de Sur y América Central

# Con la función del plot podemos vizualizar el nuevo mapa:
plot(latam)</code></pre>
<p><img src="index_files/figure-html/mapa-1.png" width="672" /></p>
</div>
<div id="sum-up" class="section level3">
<h3>Sum-up</h3>
</div>
</div>
<div id="exportaciones-por-categorías-de-productos" class="section level2">
<h2>Exportaciones por categorías de productos</h2>
<p>En esta parte, quiero realizar una breve analisis de qué categoría de producto los país exporta más.</p>
<div id="transformando-los-datos" class="section level3">
<h3>Transformando los datos</h3>
<p>Como hice en el analisis sobre importaciones, necesito descargar el data frame con los nombres de los productos y después unirlo con el data frame que generé antes. Para no tener un grafico muy largo excluyo todos los pequeños países del Caribe:</p>
<pre class="r"><code>productos_latam &lt;- tradestatistics::ots_products_shortnames %&gt;%
  rename(top_export_product_code = &quot;product_code&quot;)

productos_latam_export &lt;- merge(x = export_latam, 
                                y = productos_latam, 
                                by = &#39;top_export_product_code&#39;) %&gt;%
  filter(reporter_fullname_english != &quot;Anguilla&quot;,
         reporter_fullname_english != &quot;Neth. Antilles&quot;,
         reporter_fullname_english != &quot;Antigua and Barbuda&quot;,
         reporter_fullname_english != &quot;Bahamas&quot;,
         reporter_fullname_english != &quot;Bahamas&quot;,
         reporter_fullname_english != &quot;Barbados&quot;,
         reporter_fullname_english != &quot;Belize&quot;,
         reporter_fullname_english != &quot;Bermuda&quot;,
         reporter_fullname_english != &quot;Bouvet Island&quot;,
         reporter_fullname_english != &quot;Cocos Isds&quot;,
         reporter_fullname_english != &quot;Cayman Isds&quot;,
         reporter_fullname_english != &quot;Cuba&quot;,
         reporter_fullname_english != &quot;Grenada&quot;,
         reporter_fullname_english != &quot;Guyana&quot;,
         reporter_fullname_english != &quot;Haiti&quot;,
         reporter_fullname_english != &quot;Jamaica&quot;,
         reporter_fullname_english != &quot;Saint Kitts and Nevis (includes Anguilla until 1981)&quot;,
         reporter_fullname_english != &quot;Saint Lucia&quot;,
         reporter_fullname_english != &quot;Montserrat&quot;,
         reporter_fullname_english != &quot;Saint Pierre and Miquelon&quot;,
         reporter_fullname_english != &quot;Suriname&quot;,
         reporter_fullname_english != &quot;Turks and Caicos Isds&quot;,
         reporter_fullname_english != &quot;Trinidad and Tobago&quot;,
         reporter_fullname_english != &quot;Saint Vincent and the Grenadines&quot;) %&gt;%
  drop_na()
 </code></pre>
<p>Modifico la columna “reporter_fullname_english” para que sea un factor, porqué eso me permite modificar los nombres de las observaciones y juntarlos en la misma observación:</p>
<pre class="r"><code>productos_factor &lt;- productos_latam_export %&gt;%
  mutate(reporter_fullname_english = as.factor(reporter_fullname_english))</code></pre>
<p>Ahora eligo las columnas que necesito para graficar, y modifico el nombre de Panama y junto Argentina y Malvinas en un grupo:</p>
<pre class="r"><code>export_countries_2018 &lt;- productos_factor %&gt;%
  select(reporter_fullname_english,
         export_value_usd,
         product_shortname_english) %&gt;%
  mutate(reporter_fullname_english = fct_collapse(reporter_fullname_english,
             &quot;Panama&quot;    = c(&quot;Panama (excludes Panama Canal Zone until 1978)&quot;),
             &quot;Argentina&quot; = c(&quot;Argentina&quot;, 
                             &quot;Falkland Isds (Malvinas)&quot;))) %&gt;%
  group_by(reporter_fullname_english,
           product_shortname_english)</code></pre>
</div>
<div id="graficando" class="section level3">
<h3>Graficando</h3>
<p>Ahora estoy lista para graficar:</p>
<pre class="r"><code>ggplot(export_countries_2018, aes(
  x = reporter_fullname_english,
  y = export_value_usd,
  fill = product_shortname_english)) +
    geom_col() +
  labs(
    x = NULL,
    y = NULL,
    fill = NULL,
    title = &quot;Exportaciones por producto (2018)&quot;,
    caption = &quot;Fuerte: Open Trade Statistics&quot;) +
  scale_y_continuous(labels = scales::dollar_format()) +
  theme_economist() +
  theme(
    plot.title = element_text(size = 14),
    axis.text.x = element_text(size = 9),
    axis.text.y = element_text(size=9),
    legend.text = element_text(size = 8),
    legend.title = element_blank(),
    legend.position = &quot;bottom&quot;) +
  coord_flip()</code></pre>
<p><img src="index_files/figure-html/comercio%20LATAM%20productos%20graficar-1.png" width="672" />
### Sum-up
En primer lugar, se nota que el perfil de exportación de los países latinoamericanos es mucho más diverso que el perfil de importación donde la mayoría importan petroleo refinado.</p>
<p>En segundo lugar, también llama la atención que México de nuevo es el mayor comerciante, lo cual explica su posición fuerte en el primer analisis que hice sobre la evolución del comercio exterior. Además, México es el único país en la región que tiene los autos como principal producto de exportación.</p>
</div>
</div>
